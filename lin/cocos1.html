<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>cocos讲解一 | 功能部</title>
    <meta name="description" content="基于Vuepress的功能部博客">
    <link rel="icon" href="/funcDeploy/favicon.ico">
  <meta name="author" content="func">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <link rel="manifest" href="/funcDeploy/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/funcDeploy/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/funcDeploy/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/funcDeploy/assets/css/0.styles.c0b023b8.css" as="style"><link rel="preload" href="/funcDeploy/assets/js/app.1a7d6fab.js" as="script"><link rel="preload" href="/funcDeploy/assets/js/3.a7b73d94.js" as="script"><link rel="preload" href="/funcDeploy/assets/js/2.ed5ce42e.js" as="script"><link rel="preload" href="/funcDeploy/assets/js/13.5a1167a1.js" as="script"><link rel="preload" href="/funcDeploy/assets/js/5.6e6f0372.js" as="script"><link rel="prefetch" href="/funcDeploy/assets/js/10.fc83a47e.js"><link rel="prefetch" href="/funcDeploy/assets/js/11.6bb10719.js"><link rel="prefetch" href="/funcDeploy/assets/js/12.fa49af92.js"><link rel="prefetch" href="/funcDeploy/assets/js/14.89c1651b.js"><link rel="prefetch" href="/funcDeploy/assets/js/15.446d4ca1.js"><link rel="prefetch" href="/funcDeploy/assets/js/16.88004e01.js"><link rel="prefetch" href="/funcDeploy/assets/js/17.d2415b68.js"><link rel="prefetch" href="/funcDeploy/assets/js/18.c8115e65.js"><link rel="prefetch" href="/funcDeploy/assets/js/19.e7749221.js"><link rel="prefetch" href="/funcDeploy/assets/js/20.a853b4db.js"><link rel="prefetch" href="/funcDeploy/assets/js/21.0ee145b5.js"><link rel="prefetch" href="/funcDeploy/assets/js/22.8b85fb13.js"><link rel="prefetch" href="/funcDeploy/assets/js/23.d77f581a.js"><link rel="prefetch" href="/funcDeploy/assets/js/24.cbed620b.js"><link rel="prefetch" href="/funcDeploy/assets/js/4.3013cf42.js"><link rel="prefetch" href="/funcDeploy/assets/js/6.3663231a.js"><link rel="prefetch" href="/funcDeploy/assets/js/7.7c2c988c.js"><link rel="prefetch" href="/funcDeploy/assets/js/8.adc752e7.js"><link rel="prefetch" href="/funcDeploy/assets/js/9.67ff7d0f.js">
    <link rel="stylesheet" href="/funcDeploy/assets/css/0.styles.c0b023b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/funcDeploy/" class="home-link router-link-active"><!----> <span class="site-name">功能部</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/funcDeploy/" class="nav-link">主页</a></div><div class="nav-item"><a href="/funcDeploy/lin/rhj1.html" class="nav-link">烦闷与大学</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/funcDeploy/" class="nav-link">主页</a></div><div class="nav-item"><a href="/funcDeploy/lin/rhj1.html" class="nav-link">烦闷与大学</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>cocos讲解一</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/funcDeploy/lin/cocos1.html#节点（node）" class="sidebar-link">节点（Node）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/funcDeploy/lin/cocos1.html#☆特别注意：子节点的x，y是基于父节点位置的相对定位，而不是worldposition。例如，若在父节点默认创建一个sprite节点，则其默认位置为相对于父节点的（0，0）" class="sidebar-link">☆特别注意：子节点的X，Y是基于父节点位置的相对定位，而不是worldPosition。例如，若在父节点默认创建一个sprite节点，则其默认位置为相对于父节点的（0，0）</a></li></ul></li><li><a href="/funcDeploy/lin/cocos1.html#属性面板" class="sidebar-link">属性面板</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/funcDeploy/lin/cocos1.html#资源管理器" class="sidebar-link">资源管理器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/funcDeploy/lin/cocos1.html#脚本" class="sidebar-link">脚本</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/funcDeploy/lin/cocos1.html#碰撞系统与物理系统" class="sidebar-link">碰撞系统与物理系统</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="cocos讲解一"><a href="#cocos讲解一" aria-hidden="true" class="header-anchor">#</a> cocos讲解一</h1> <p>==&gt;@author 林传舜&lt;==</p> <p>==&gt;@date 2020.1.16&lt;==</p> <blockquote><p>市面上的手游开发引擎：
unity3D, cocos等</p></blockquote> <p>cocos的优势：</p> <ol><li><p>手机端市场占有率约为50%</p></li> <li><p><strong>基于JS或者TS</strong></p></li> <li><p>强大的物理系统和碰撞系统</p></li></ol> <h2 id="节点（node）"><a href="#节点（node）" aria-hidden="true" class="header-anchor">#</a> 节点（Node）</h2> <p>以html为例：</p> <blockquote><p>HTML 文档中的所有内容都是节点：
整个文档是一个文档节点
每个 HTML 元素是元素节点
HTML 元素内的文本是文本节点
每个 HTML 属性是属性节点
注释是注释节点</p></blockquote> <p><img src="https://www.w3school.com.cn/i/ct_htmltree.gif" alt=""></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- test.html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parents<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>节点关系：</p> <div class="language-plaintext extra-class"><pre class="language-text"><code>整篇文档
  |__div(parents)
      |__div(children)
      |__div(children)
          |__img
</code></pre></div><p>概念提要：节点 父节点 子节点</p> <h3 id="☆特别注意：子节点的x，y是基于父节点位置的相对定位，而不是worldposition。例如，若在父节点默认创建一个sprite节点，则其默认位置为相对于父节点的（0，0）"><a href="#☆特别注意：子节点的x，y是基于父节点位置的相对定位，而不是worldposition。例如，若在父节点默认创建一个sprite节点，则其默认位置为相对于父节点的（0，0）" aria-hidden="true" class="header-anchor">#</a> ☆特别注意：子节点的X，Y是基于父节点位置的相对定位，而不是worldPosition。例如，若在父节点默认创建一个sprite节点，则其默认位置为相对于父节点的（0，0）</h3> <blockquote><p>注意事项：排位靠上的节点会遮盖其他节点</p></blockquote> <h2 id="属性面板"><a href="#属性面板" aria-hidden="true" class="header-anchor">#</a> 属性面板</h2> <p>右边的面板，包含许多属性。</p> <h2 id="资源管理器"><a href="#资源管理器" aria-hidden="true" class="header-anchor">#</a> 资源管理器</h2> <p>assets文件夹的基本结构(手动创建即可)：</p> <div class="language-plaintext extra-class"><pre class="language-text"><code>assets
  |__resources
  |__scenes
  |__scripts
  |__......
</code></pre></div><blockquote><p>提醒：resources 文件夹中的所有资源，连同它们关联依赖的 resources 文件夹外部的资源，都会被导出。如果一份资源仅仅是被 resources 中的其它资源所依赖，而不需要直接被 cc.loader.loadRes 调用，那么请不要放在 resources 文件夹里。</p></blockquote> <p>resources用于存放各种必须的素材资源。</p> <p>script存放js或者ts脚本。</p> <p>scenes存放场景。场景是指.fire为后缀名的、火焰图标的文件，它实际上是【一个界面】，UI场景在场景中铺设。</p> <blockquote><p>提示 双击js文件可以用编译器打开并编辑。</p></blockquote> <p><strong>核心操作：拖动。</strong></p> <ol><li>把JS拖动到【<strong>节点的属性管理器上</strong>】</li> <li>把图片素材拖动到spriteFrame当中，给节点“换肤&quot;</li> <li>把节点拖动到【节点插槽】中</li></ol> <h2 id="脚本"><a href="#脚本" aria-hidden="true" class="header-anchor">#</a> 脚本</h2> <p>cocos中的脚本遵循组件化开发的思路，即在大多数情况下，一个JavaScript（或ts）需要挂载到一个节点上，并对这个节点生效。和微信小程序一个界面对应一个js是类似的。</p> <p>脚本的基本结构：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* NewScript.js */</span>
cc<span class="token punctuation">.</span><span class="token function">Class</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">extends</span><span class="token punctuation">:</span> cc<span class="token punctuation">.</span>Component<span class="token punctuation">,</span><span class="token comment">//配置项，不用管它</span>
    properties<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//用于记录各种插槽</span>
    <span class="token comment">// LIFE-CYCLE CALLBACKS:</span>
    <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//生命周期函数，与小程序的onLoad非常相似</span>

    <span class="token function">update</span> <span class="token punctuation">(</span><span class="token parameter">dt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//游戏开发的核心生命周期函数，</span>
    <span class="token comment">//dt表示一帧时间</span>
    <span class="token comment">//写在这里的函数每一帧都会被执行一次。</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>插槽</p> <p>Node插槽：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* ball.js */</span>
cc<span class="token punctuation">.</span><span class="token function">Class</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">extends</span><span class="token punctuation">:</span> cc<span class="token punctuation">.</span>Component<span class="token punctuation">,</span>
    properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">//任意命名，建议符合js命名规范。</span>
       ballObj<span class="token punctuation">:</span><span class="token punctuation">{</span>
         <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token comment">//如果是节点插槽，默认值应为null</span>
         type<span class="token punctuation">:</span>cc<span class="token punctuation">.</span>Node<span class="token punctuation">,</span><span class="token comment">//引擎定义好的一种数据类型，节点类型</span>
         tooltip<span class="token punctuation">:</span><span class="token string">&quot;被控制的球体&quot;</span><span class="token comment">//在属性面板中，当鼠标悬</span>
        <span class="token comment">//  停在插槽的时候会显示的提示语，选填。</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       initialSpeed<span class="token punctuation">:</span><span class="token punctuation">{</span>
         <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token comment">//这是一个数字类型的插槽，UI组在前端可以直接在属性面板编辑它。</span>
         type<span class="token punctuation">:</span>cc<span class="token punctuation">.</span>Float<span class="token comment">//注意，cc.Float是引擎内置的类型，数字类型除了cc.Float还有cc.Interger</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">update</span> <span class="token punctuation">(</span><span class="token parameter">dt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>让球水平移动</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>cc<span class="token punctuation">.</span><span class="token function">Class</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token punctuation">:</span> cc<span class="token punctuation">.</span>Component<span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    ballObj<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
      type<span class="token punctuation">:</span>cc<span class="token punctuation">.</span>Node<span class="token punctuation">,</span>
      tooltip<span class="token punctuation">:</span><span class="token string">&quot;被控制的球体&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    moveDuration<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token comment">//多久完成移动</span>
      defautl<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token comment">//单位为s</span>
      type<span class="token punctuation">:</span> cc<span class="token punctuation">.</span>Float
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> moveAction <span class="token operator">=</span> cc
      <span class="token punctuation">.</span><span class="token function">moveBy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>moveDuration<span class="token punctuation">,</span> cc<span class="token punctuation">.</span><span class="token function">v2</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">/* .easing(cc.easeCubicActionOut()); */</span>

      <span class="token comment">//moveAction是预设的一套动作，可以使用</span>
      <span class="token comment">// Node.runAction（action）来执行，具体</span>
      <span class="token comment">// 参考Api文档，被注释掉的那一行表示按照一定</span>
      <span class="token comment">// 的方式非匀速运动</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ballObj<span class="token punctuation">.</span><span class="token function">runAction</span><span class="token punctuation">(</span>moveAction<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">dt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意：要把节点拖进来，并且把js拖到相应的节点上去，它才会生效。这样拖动的控制方式有利于开发者理清各个脚本、节点间的关联。例子：操纵杆。</p></blockquote> <h2 id="碰撞系统与物理系统"><a href="#碰撞系统与物理系统" aria-hidden="true" class="header-anchor">#</a> 碰撞系统与物理系统</h2> <p>刚体</p> <p>物理物体</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3 months ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/funcDeploy/assets/js/app.1a7d6fab.js" defer></script><script src="/funcDeploy/assets/js/3.a7b73d94.js" defer></script><script src="/funcDeploy/assets/js/2.ed5ce42e.js" defer></script><script src="/funcDeploy/assets/js/13.5a1167a1.js" defer></script><script src="/funcDeploy/assets/js/5.6e6f0372.js" defer></script>
  </body>
</html>
